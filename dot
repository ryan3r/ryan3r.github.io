#!/bin/sh

depend() {
    which $1 >/dev/null
    if [ $? -eq 1 ]; then
        if [ "$EUID" = "0" ]; then
            which apt >/dev/null
            if [ $? -eq 0 ]; then
                apt install -y $1
            else
                echo "Please install $1"
            fi
        else
            echo "Please install $1 or rerun this script as root"
        fi
    fi
}

depend git
depend vim
depend tmux

cd ~
git clone https://github.com/ryan3r/dotfiles.git
cd dotfiles
git submodule init
git submodule update
chmod +x link
tmux new -d \; send-keys "cd ~/dotfiles; ./link" Enter \; attach